<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>お問い合わせ | 西川建設工業</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Yomogi&display=swap" rel="stylesheet">
  <script>
    // URLパラメータからフォームデータを取得して表示
    window.onload = function() {
      const urlParams = new URLSearchParams(window.location.search);
      document.getElementById('confirm-name').innerText = urlParams.get('name');
      document.getElementById('confirm-email').innerText = urlParams.get('email');
      document.getElementById('confirm-phone').innerText = urlParams.get('phone');
      document.getElementById('confirm-message').innerText = urlParams.get('message');

      // 隠しフィールドにも設定
      document.getElementById('confirm-name-input').value = urlParams.get('name');
      document.getElementById('confirm-email-input').value = urlParams.get('email');
      document.getElementById('confirm-phone-input').value = urlParams.get('phone');
      document.getElementById('confirm-message-input').value = urlParams.get('message');
    };

    async function handleSubmit(event) {
      event.preventDefault(); // デフォルトのフォーム送信を防ぐ

      const formData = {
        name: document.getElementById('confirm-name-input').value,
        email: document.getElementById('confirm-email-input').value,
        phone: document.getElementById('confirm-phone-input').value,
        message: document.getElementById('confirm-message-input').value
      };

      try {
        const response = await fetch("https://formspree.io/f/xwpvvjkq", { // FormspreeのURL
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(formData),
        });

        if (response.ok) {
          // 成功時
          window.location.href = "thank_you.html";
        } else {
          // 失敗時
          window.location.href = "error.html";
        }
      } catch (error) {
        // ネットワークエラーなどの場合
        window.location.href = "error.html";
      }
    }
  </script>
</head>
<body>
  <!-- ヘッダー -->
  <header>
    <div class="container">
      <div id="menu_box">
        <h1 id="CompanyName"><a href="index.html" style="text-decoration: none; color: black;">有限会社西川建設工業</a></h1>
        <nav class="menuran">
          <ul id="menu" class="clearfix">
            <li><a href="index.html">ホーム</a></li>
            <li><a href="about.html">会社案内</a></li>
            <li><a href="Construction.html">施工事例</a></li>
            <li><a href="recruit.html">採用情報</a></li>
            <li><a href="contact.html">お問い合わせ</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- 確認画面セクション -->
  <section>
    <div class="page_title_contact">
      <h2>確認画面</h2>
    </div>
  </section>

  <section>
    <div class="breadcrumb_box">
      <ol class="breadcrumb">
        <li><a href="index.html">ホーム</a></li>
        <li><a href="contact.html">お問い合わせ</a></li>
        <li>確認画面</li>
      </ol>
    </div>
  </section>

  <section class="contact-content">
    <div class="container">
      <h3>お問い合わせ内容の確認</h3>
      <p>以下の内容でお問い合わせいただきます。問題がなければ「送信する」ボタンを押してください。</p>

      <form id="contactForm" onsubmit="handleSubmit(event)">
        <label for="name">お名前</label>
        <p id="confirm-name"></p>

        <label for="email">メールアドレス</label>
        <p id="confirm-email"></p>

        <label for="phone">電話番号</label>
        <p id="confirm-phone"></p>

        <label for="message">お問い合わせ内容</label>
        <p id="confirm-message"></p>

        <!-- 隠しフィールドに確認内容をセット -->
        <input type="hidden" name="name" id="confirm-name-input">
        <input type="hidden" name="_replyto" id="confirm-email-input">
        <input type="hidden" name="phone" id="confirm-phone-input">
        <input type="hidden" name="message" id="confirm-message-input">

        <button type="submit" class="cta-button">送信する</button>
        <button type="button" class="cta-button" onclick="history.back();">戻る</button>
      </form>
    </div>
  </section>

  <style>
    /* 確認画面のスタイル */
    .contact-content {
      margin-top: 20px;
    }

    .cta-button {
      padding: 10px 20px;
      margin-top: 10px;
      background-color: #483b8c;
      color: white;
      border: none;
      cursor: pointer;
    }

    .cta-button:hover {
      background-color: #695ab9;
    }
  </style>
  
  <!-- フッター -->
  <footer>
    <p>&copy; 2024 西川建設工業 | All Rights Reserved</p>
  </footer>
</body>
</html>
